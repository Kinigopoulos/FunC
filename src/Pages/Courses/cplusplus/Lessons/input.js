import React, {useEffect, useState} from "react";import Header from "../../../../Header/Header";import Sidebar from "../../sidebar";import {Button, Container} from "react-bootstrap";import Row from "react-bootstrap/Row";import Col from "react-bootstrap/Col";import {useSelector} from "react-redux";import LocalizedStrings from "react-localization";import axios from "axios";import Footer from "../../../../Footer/Footer";let langStrings = new LocalizedStrings({    en: {        test: "Take a Test!",        previous: "🠈 Previous Lesson",        next: "Next Lesson 🠊",    },    gr: {        test: "Κάνε το Τεστ!",        previous: "🠈 Προηγούμενο Μάθημα",        next: "Επόμενο Μάθημα 🠊"    }});function Try() {    const language = useSelector(state => state.language);    const [posts, setPosts] = useState([]);    let myUrl = window.location.pathname.split("/");    let lang = myUrl[1];    let tit = myUrl[2].replace(/-/g, " ");    console.log(myUrl);    function displayBlogPost(){        if (posts.length === 0){            return {__html: " "};        }        if (language === 'en') {            return {__html: posts.title + posts.language + posts.text};        } else {            return {__html: posts.eltitle + posts.language + posts.eltext};        }    }    useEffect(() => {         async function getBlogPost() {            axios.get('/lesson/'+ lang +'/' + tit)                .then((response) => {                    const data = response.data;                    console.log(data[0]);                    setPosts(data[0]);                    console.log('Data has been received!!');                    return displayBlogPost()                })                .catch(() => {                    alert('Error retrieving data!!!');                });        }        getBlogPost().then()    }, []);    const [items, setItems] = useState([]);    useEffect(() => {        async function getTitles() {            if(language === "en"){                axios.get('/lesson/titles')                    .then((response) => {                        const data = response.data;                        console.log(data["lessons"]);                        setItems(data["lessons"]);                        console.log('Data has been received!!');                    })                    .catch(() => {                        alert('Error retrieving data!!!');                    });            }            else{                axios.get('/lesson/eltitles')                    .then((response) => {                        const data = response.data;                        console.log(data["lessons"]);                        setItems(data["lessons"]);                        console.log('Data has been received!!');                    })                    .catch(() => {                        alert('Error retrieving data!!!');                    });            }        }        getTitles().then()    }, []);        function getPrevious() {            let prev = posts.key;            if(posts.key > 1){                prev = posts.key - 1;            }            console.log("THIS IS PREVIOUS KEY    " + posts.key);            axios.get('/other/'+ lang +'/' + prev)                .then((response) => {                    const data = response.data;                    const previous = data[0].url;                    console.log(previous);                    console.log('Previous has been received!!');                    return previous                })                .catch(() => {                    alert('Error retrieving PREVIOUS!!!');                });        }    const prevLesson = getPrevious();        console.log("PREVIOUS LESSON" + prevLesson);    return (        <>            <Header/>            <Sidebar Lessons={items}/>            <div className="lessons courses">                <h1 className="title superRainbowText outlineForRainbowTextTHICC">{language === 'en' && posts.title || posts.eltitle}</h1>                <div id="htmldngrs" dangerouslySetInnerHTML={displayBlogPost()} />                <Container className="mt-2">                    <Button variant="dark" size="lg" className="test mb-2" href= "/for_text">                        <b className="text"> {langStrings.test}</b>                    </Button>                </Container>                <br/>                <br/>                <Container fluid={true}>                    <Row>                        <Col>                            <Button variant="light" size="lg" disabled={false/*SET TRUE IF FIRST LESSON*/}                                    className="previous mb-2" href= "2.html ">                                <b className="text"> {langStrings.previous}</b>                            </Button>                        </Col>                        <Col>                            <Button variant="light" size="lg" disabled={false/*SET TRUE IF LAST LESSON*/}                                    className="next mb-2" href="/GET_NEXT_LESSON">                                <b className="text"> {langStrings.next}</b>                            </Button>                        </Col>                    </Row>                </Container>            </div>            <Footer/>        </>    )}export default Try;